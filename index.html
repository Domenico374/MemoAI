<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Memo AI</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- DOCX preview (client-side) -->
  <script src="https://unpkg.com/mammoth/mammoth.browser.min.js"></script>
  <!-- PDF preview (render first page) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
  <script>
    // Configura PDF.js (worker) quando il DOM è pronto, con controlli di esistenza
    document.addEventListener('DOMContentLoaded', function(){
      var lib = window.pdfjsLib || (window['pdfjs-dist/build/pdf'] || null);
      if (lib && lib.GlobalWorkerOptions) {
        lib.GlobalWorkerOptions.workerSrc =
          'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js';
        window.pdfjsLib = lib; // assicura alias globale
      }
    });
  </script>
  <style>
    body { background:#f5f7fb }
    .prose :where(h1,h2,h3){margin:.25rem 0 .5rem}

    /* ---------- Pulsanti colorati + stati ---------- */
    :root{
      --radius: 10px;
      --muted: #e2e8f0;     /* Pulizia */
      --secondary: #6366f1; /* Verbale */
      --success: #10b981;   /* Trascrizione */
      --primary: #2563eb;   /* Genera verbale */
      --danger: #ef4444;    /* Resettare */
    }
    .btn{
      -webkit-tap-highlight-color: transparent;
      appearance: none;
      border: 1px solid transparent;
      border-radius: var(--radius);
      padding: 8px 14px;
      font: 600 14px/1 system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
      cursor: pointer;
      transition: transform .06s ease, box-shadow .2s ease, background-color .2s ease, opacity .2s ease;
      display: inline-flex; align-items: center; gap: .5rem;
      box-shadow: 0 1px 0 rgba(15,23,42,.06);
    }
    .btn:active{ transform: translateY(1px) scale(.98); }
    .btn:focus-visible{ outline: 0; box-shadow: 0 0 0 3px rgba(37,99,235,.25); }
    .btn[disabled]{ opacity:.55; cursor:not-allowed; }
    .btn--muted{     background: var(--muted);     color:#0b1220; }
    .btn--muted:hover{ filter: brightness(.97); }
    .btn--secondary{ background: var(--secondary); color:#fff; }
    .btn--secondary:hover{ filter: brightness(.95); }
    .btn--success{   background: var(--success);   color:#fff; }
    .btn--success:hover{ filter: brightness(.95); }
    .btn--primary{   background: var(--primary);   color:#fff; }
    .btn--primary:hover{ filter: brightness(.95); }
    .btn--danger{    background: var(--danger);    color:#fff; }
    .btn--danger:hover{ filter: brightness(.95); }

    .btn.is-active{
      box-shadow: 0 0 0 3px rgba(16,185,129,.2), 0 6px 14px rgba(2,6,23,.12);
    }
    .btn.is-loading{ position: relative; pointer-events:none; }
    .btn.is-loading::after{
      content:"";
      width: 1em; height: 1em; border-radius: 999px;
      border: 2px solid currentColor; border-top-color: transparent;
      position:absolute; right: 10px; top: 50%; transform: translateY(-50%);
      animation: spin .9s linear infinite;
    }
    @keyframes spin{ to{ transform: translateY(-50%) rotate(360deg) } }
  </style>
</head>
<body class="text-slate-800">
  <div class="max-w-4xl mx-auto p-6">
    <!-- Header -->
    <header class="mb-6 flex items-center justify-between gap-3">
      <div>
        <h1 class="text-3xl font-bold">Memo AI</h1>
        <p class="text-sm text-slate-600">Upload file → Trascrizione / Estrazione → Formattazione</p>
      </div>
      <span id="healthBadge" class="text-xs px-2.5 py-1 rounded-full bg-slate-200 text-slate-700">checking…</span>
    </header>

    <!-- Up
